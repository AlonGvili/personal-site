language: node_js
node_js:
  - "8"
cache:
  directories:
      - "node_modules"
install: npm install --production
script: npm run export
before_deploy: npm install now --no-save
deploy:
  provider: script
  script: npm run deploy && curl https://analytics.sergiodxa.com?action=Deploying&type=info&description=$TRAVIS_COMMIT
  skip_cleanup: true
  on:
    branch: master